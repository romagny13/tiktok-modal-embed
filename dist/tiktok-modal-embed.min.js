function loadTikTokAPI(){return new Promise(((resolve,reject)=>{if(window.Tiktok&&window.Tiktok.Player)return void resolve();const script=document.createElement("script");script.src="https://www.tiktok.com/embed.js",script.onload=()=>waitForTikTokAPI(resolve,reject),script.onerror=err=>reject(err),document.body.appendChild(script)}))}function waitForTikTokAPI(resolve,reject){const checkInterval=setInterval((()=>{window.Tiktok&&window.Tiktok.Player&&(clearInterval(checkInterval),resolve())}),100)}class TikTokEmbed{constructor(options={}){this.version="1.0.2",this._options={modalAnimation:!0,autoplayOnOpen:!0,...options},this._instances=[],this._init()}_init(){this._addGlobalStyles();document.querySelectorAll(this._options.selector).forEach((element=>this._createInstance(element)))}_addGlobalStyles(){if(document.getElementById("tiktok-embed-styles"))return;const style=document.createElement("style");style.id="tiktok-embed-styles",style.innerHTML='\n  /* Styles du conteneur principal */\n  .tiktok-wrapper {\n    max-width: 1200px;\n    margin: 0 auto;\n  }\n\n  /* Styles pour le plugin TikTok */\n  .tiktok-embed-wrapper {\n    display: inline-block;\n    position: relative;\n  }\n\n  .tiktok-preview-button {\n    display: inline-flex;\n    align-items: center;\n    gap: 12px;\n    padding: 16px 28px;\n    background: linear-gradient(45deg, #f8bbd0, #bbdefb);\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n    color: white;\n    border-radius: 12px;\n    cursor: pointer;\n    border: none;\n    font-size: 16px;\n    font-weight: 600;\n    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); /* Ombre plus douce */\n    transition: all 0.3s ease;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .tiktok-preview-button::before {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(\n      120deg,\n      transparent,\n      rgba(255, 255, 255, 0.3),\n      transparent\n    );\n    transition: 0.5s;\n  }\n\n  .tiktok-preview-button:hover::before {\n    left: 100%;\n  }\n\n  .tiktok-preview-button:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 25px rgba(0, 0, 0, 0.2); /* Ombre plus marquée au survol */\n  }\n\n  .tiktok-preview-button:active {\n    transform: scale(0.98);\n  }\n\n  .tiktok-button-icon {\n    font-size: 24px;\n  }\n\n  .tiktok-button-text {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 4px;\n  }\n\n  .tiktok-button-subtitle {\n    font-size: 14px;\n    opacity: 0.8; /* Opacité réduite pour un look plus léger */\n    font-weight: normal;\n  }\n\n  /* Modal styles */\n  .tiktok-modal {\n    display: none;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.8);\n    z-index: 1000;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n  }\n\n  .tiktok-modal.active {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    opacity: 1;\n  }\n\n.tiktok-modal-content {\n    background: white;\n    padding: 20px;\n    border-radius: 12px;\n    position: relative;\n    transform: scale(0.7); /* Commence plus petit */\n    transition: transform 0.3s ease; /* Transition fluide pour la mise à l\'échelle */\n    max-width: 90vw;\n    min-height: 300px; \n    opacity: 0; /* Commence avec une opacité nulle */\n  }\n\n  .tiktok-modal.active .tiktok-modal-content {\n    transform: scale(1); /* Restaure à la taille normale */\n    opacity: 1; /* Restaure l\'opacité */\n  }\n\n  @keyframes popin {\n    0% {\n      transform: scale(0.7);\n      opacity: 0;\n    }\n    50% {\n      transform: scale(1.05);\n      opacity: 1;\n    }\n    100% {\n      transform: scale(1);\n      opacity: 1;\n    }\n  }\n\n  .tiktok-modal.active .tiktok-modal-content {\n    animation: popin 0.5s ease-out forwards; /* Application de l\'animation */\n  }\n\n  .tiktok-close-button {\n    position: absolute;\n    top: -40px;\n    right: -40px;\n    width: 36px;\n    height: 36px;\n    background: white;\n    border: none;\n    border-radius: 50%;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 20px;\n    color: #333;\n    transition: transform 0.2s ease;\n  }\n\n  .tiktok-close-button:hover {\n    transform: rotate(90deg);\n  }\n',document.head.appendChild(style)}_createInstance(element){const videoUrl=element.dataset.videoUrl,title=element.dataset.title,subtitle=element.dataset.subtitle,videoId=this._getVideoId(videoUrl);if(!videoId)return;const instance={element:element,videoUrl:videoUrl,videoId:videoId,modal:null};this._createPreviewButton(instance,title,subtitle),this._createModal(instance),this._instances.push(instance)}_createPreviewButton(instance,title,subtitle){const button=document.createElement("button");button.className="tiktok-preview-button",button.innerHTML=`\n                <span class="tiktok-button-icon">\n                    <i class="fab fa-tiktok"></i>\n                </span>\n                <span class="tiktok-button-text">\n                    <span>${title}</span>\n                    <span class="tiktok-button-subtitle">${subtitle}</span>\n                </span>\n            `,button.addEventListener("click",(()=>this._openModal(instance))),instance.element.appendChild(button)}_createModal(instance){const modal=document.createElement("div");modal.className="tiktok-modal",modal.innerHTML='\n                <div class="tiktok-modal-content">\n                    <button class="tiktok-close-button">\n                        <i class="fas fa-times"></i>\n                    </button>\n                    <div class="tiktok-embed-container"></div>\n                </div>\n            ',modal.querySelector(".tiktok-close-button").addEventListener("click",(()=>{this._closeModal(instance)})),modal.addEventListener("click",(e=>{e.target===modal&&this._closeModal(instance)})),instance.modal=modal,document.body.appendChild(modal)}_openModal(instance){instance.modal.classList.add("active"),this.loadTikTok(instance),document.body.style.overflow="hidden"}_closeModal(instance){instance.modal.classList.remove("active");instance.modal.querySelector(".tiktok-embed-container").innerHTML="",document.body.style.overflow=""}_getVideoId(url){const match=url.match(/\/video\/(\d+)/);return match?match[1]:null}loadTikTok(instance){const container=instance.modal.querySelector(".tiktok-embed-container"),embed=document.createElement("blockquote");embed.className="tiktok-embed",embed.setAttribute("cite",instance.videoUrl),embed.setAttribute("data-video-id",instance.videoId),embed.style.maxWidth="325px",embed.style.minWidth="325px";const section=document.createElement("section");embed.appendChild(section),container.innerHTML="",container.appendChild(embed),loadTikTokAPI().then((()=>{window.Tiktok.Embed.embedTikTokElements()})).catch((error=>console.error("An error occurred while loading the TikTok script:",error)))}}